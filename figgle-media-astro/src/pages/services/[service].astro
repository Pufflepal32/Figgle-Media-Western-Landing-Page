---
import ServiceLayout from '@/layouts/ServiceLayout.astro';
import { services, getService } from '@/data/services';

export function getStaticPaths() {
  return services.map((service) => ({
    params: { service: service.slug },
    props: { service },
  }));
}

const { service } = Astro.props;
---

<ServiceLayout
  title={`${service.title} for Construction Companies | Figgle Media`}
  description={service.longDescription}
  service={{
    title: service.title,
    slug: service.slug,
    description: service.longDescription,
    icon: service.icon,
    features: service.features,
  }}
>
  <div class="service-intro">
    <p>{service.longDescription}</p>
  </div>

  {service.subservices && service.subservices.length > 0 && (
    <div class="subservices-section">
      <h2 class="section-title">Specialized <span>{service.title}</span></h2>
      <div class="subservices-grid">
        {service.subservices.map((sub) => (
          <a href={`/services/${service.slug}/${sub.slug}`} class="subservice-card">
            <h3>{sub.title}</h3>
            <p>{sub.description}</p>
            <span class="learn-more">
              Learn More
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M5 12h14M12 5l7 7-7 7"/>
              </svg>
            </span>
          </a>
        ))}
      </div>
    </div>
  )}

  <div class="service-process">
    <h2 class="section-title">Our <span>Process</span></h2>
    <div class="process-steps">
      <div class="process-step">
        <span class="step-number">1</span>
        <h3>Discovery</h3>
        <p>We learn about your business, goals, competition, and current marketing efforts.</p>
      </div>
      <div class="process-step">
        <span class="step-number">2</span>
        <h3>Strategy</h3>
        <p>We develop a customized plan tailored to your specific market and objectives.</p>
      </div>
      <div class="process-step">
        <span class="step-number">3</span>
        <h3>Implementation</h3>
        <p>We execute the strategy with attention to detail and industry best practices.</p>
      </div>
      <div class="process-step">
        <span class="step-number">4</span>
        <h3>Optimization</h3>
        <p>We continuously monitor, analyze, and improve based on real data and results.</p>
      </div>
    </div>
  </div>
</ServiceLayout>

<style>
  .service-intro {
    margin-bottom: var(--spacing-lg);
  }

  .service-intro p {
    font-size: 1.15rem;
    line-height: 1.8;
    color: var(--color-text-light);
  }

  .subservices-section {
    margin-top: var(--spacing-xl);
  }

  .subservices-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--spacing-md);
    margin-top: var(--spacing-lg);
  }

  .subservice-card {
    background: var(--color-bg-card);
    padding: var(--spacing-lg);
    border-radius: 8px;
    border: 3px solid var(--color-tan);
    transition: all 0.3s ease;
  }

  .subservice-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    border-color: var(--color-accent-primary);
  }

  .subservice-card h3 {
    font-family: var(--font-display);
    font-size: 1.2rem;
    color: var(--color-bg-dark);
    margin-bottom: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  .subservice-card p {
    color: var(--color-text-dark);
    line-height: 1.6;
    margin-bottom: var(--spacing-sm);
  }

  .learn-more {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--color-accent-primary);
    font-weight: 600;
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  .learn-more svg {
    width: 16px;
    height: 16px;
    transition: transform 0.3s ease;
  }

  .subservice-card:hover .learn-more svg {
    transform: translateX(4px);
  }

  .service-process {
    margin-top: var(--spacing-xl);
    padding-top: var(--spacing-xl);
    border-top: 2px solid var(--color-bg-light);
  }

  .process-steps {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: var(--spacing-md);
    margin-top: var(--spacing-lg);
  }

  .process-step {
    text-align: center;
    padding: var(--spacing-md);
    background: var(--color-bg-light);
    border-radius: 8px;
  }

  .step-number {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 50px;
    height: 50px;
    background: var(--color-accent-primary);
    color: var(--color-cream);
    font-family: var(--font-display);
    font-size: 1.5rem;
    border-radius: 50%;
    margin-bottom: 1rem;
  }

  .process-step h3 {
    font-family: var(--font-heading);
    font-size: 1.1rem;
    color: var(--color-cream);
    margin-bottom: 0.5rem;
  }

  .process-step p {
    color: var(--color-text-muted);
    font-size: 0.95rem;
    line-height: 1.5;
  }
</style>
